import React, { useState, useEffect } from 'react';
import { Mail, Linkedin, Github, Send, ExternalLink, Square, FileText, Code, Briefcase, Award } from 'lucide-react';
import { Button } from '../components/ui/button';
import { Input } from '../components/ui/input';
import { Textarea } from '../components/ui/textarea';
import { Badge } from '../components/ui/badge';
import { toast } from '../hooks/use-toast';
import { personalInfo, skills, experience, education, certifications, projects } from '../mock';

const Home = () => {
  const [activeSection, setActiveSection] = useState('home');
  const [formData, setFormData] = useState({ name: '', email: '', message: '' });
  const [isSubmitting, setIsSubmitting] = useState(false);

  useEffect(() => {
    const handleScroll = () => {
      const sections = ['home', 'projects', 'skills', 'about-me', 'contacts'];
      for (const section of sections) {
        const element = document.getElementById(section);
        if (element) {
          const rect = element.getBoundingClientRect();
          if (rect.top <= 100 && rect.bottom >= 100) {
            setActiveSection(section);
            break;
          }
        }
      }
    };

    window.addEventListener('scroll', handleScroll);
    return () => window.removeEventListener('scroll', handleScroll);
  }, []);

  const scrollToSection = (sectionId) => {
    const element = document.getElementById(sectionId);
    if (element) {
      element.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }
  };

  const handleInputChange = (e) => {
    setFormData({ ...formData, [e.target.name]: e.target.value });
  };

  const handleSubmit = async (e) => {
    e.preventDefault();
    setIsSubmitting(true);

    setTimeout(() => {
      const message = {
        ...formData,
        id: Date.now(),
        timestamp: new Date().toISOString()
      };
      
      const existingMessages = JSON.parse(localStorage.getItem('contactMessages') || '[]');
      existingMessages.push(message);
      localStorage.setItem('contactMessages', JSON.stringify(existingMessages));

      toast({
        title: "Message Sent!",
        description: "Thank you for reaching out. I'll get back to you soon.",
      });

      setFormData({ name: '', email: '', message: '' });
      setIsSubmitting(false);
    }, 1000);
  };

  return (
    <div className=\"min-h-screen bg-[#282C33] text-white font-['Fira_Code']\">\n      {/* Fixed Left Sidebar */}\n      <div className=\"fixed left-0 top-0 bottom-0 w-16 hidden md:flex flex-col items-center justify-between py-8 z-50\">\n        <div className=\"w-px h-32 bg-[#ABB2BF]\"></div>\n        <div className=\"flex flex-col gap-4\">\n          <a href={personalInfo.github} target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-[#ABB2BF] hover:text-[#C778DD] transition-colors\">\n            <Github className=\"w-6 h-6\" />\n          </a>\n          <a href={personalInfo.linkedin} target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-[#ABB2BF] hover:text-[#C778DD] transition-colors\">\n            <Linkedin className=\"w-6 h-6\" />\n          </a>\n          <a href={`mailto:${personalInfo.email}`} className=\"text-[#ABB2BF] hover:text-[#C778DD] transition-colors\">\n            <Mail className=\"w-6 h-6\" />\n          </a>\n        </div>\n        <div className=\"w-px h-32 bg-[#ABB2BF]\"></div>\n      </div>\n\n      {/* Top Navigation */}\n      <header className=\"fixed top-0 left-0 right-0 bg-[#282C33] border-b border-[#1E1E1E] z-40\">\n        <div className=\"container mx-auto px-4 md:px-16 py-4\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center gap-2\">\n              <Square className=\"w-4 h-4 text-[#C778DD]\" />\n              <span className=\"text-white font-bold\">{personalInfo.name.split(' ')[0]}</span>\n            </div>\n\n            <nav className=\"flex items-center gap-8\">\n              {[\n                { id: 'home', label: 'home' },\n                { id: 'projects', label: 'works' },\n                { id: 'skills', label: 'skills' },\n                { id: 'about-me', label: 'about-me' },\n                { id: 'contacts', label: 'contacts' }\n              ].map((item) => (\n                <button\n                  key={item.id}\n                  onClick={() => scrollToSection(item.id)}\n                  className={`text-sm transition-colors ${\n                    activeSection === item.id\n                      ? 'text-white'\n                      : 'text-[#ABB2BF] hover:text-white'\n                  }`}\n                >\n                  <span className=\"text-[#C778DD]\">#</span>{item.label}\n                </button>\n              ))}\n            </nav>\n          </div>\n        </div>\n      </header>\n\n      {/* Hero Section */}\n      <section id=\"home\" className=\"min-h-screen flex items-center pt-20 relative overflow-hidden\">\n        <div className=\"container mx-auto px-4 md:px-16\">\n          <div className=\"grid md:grid-cols-2 gap-12 items-center\">\n            {/* Left Content */}\n            <div className=\"relative z-10\">\n              <h1 className=\"text-3xl md:text-4xl font-semibold mb-8\">\n                {personalInfo.name} is an <span className=\"text-[#C778DD]\">automation engineer</span> and{' '}\n                <span className=\"text-[#C778DD]\">electrical specialist</span>\n              </h1>\n              <p className=\"text-[#ABB2BF] mb-8\">\n                He crafts innovative automation solutions where technologies meet precision\n              </p>\n              <Button \n                onClick={() => scrollToSection('contacts')}\n                className=\"border border-[#C778DD] bg-transparent hover:bg-[#C778DD]/10 text-white px-6\"\n              >\n                Contact me!!\n              </Button>\n            </div>\n\n            {/* Right Content - Image with decorations */}\n            <div className=\"relative\">\n              {/* Decorative squares */}\n              <div className=\"absolute -top-10 -left-10 w-20 h-20 border border-[#C778DD]\"></div>\n              <div className=\"absolute -bottom-10 -right-10 w-24 h-24 border border-[#C778DD]\"></div>\n              \n              {/* Profile Image */}\n              <div className=\"relative z-10\">\n                <div className=\"w-full max-w-sm mx-auto aspect-square bg-gradient-to-br from-[#1E1E1E] to-[#282C33] rounded-sm border border-[#C778DD] flex items-center justify-center\">\n                  <Code className=\"w-32 h-32 text-[#C778DD]\" />\n                </div>\n                \n                {/* Status Badge */}\n                <div className=\"mt-4 border border-[#ABB2BF] p-3 inline-flex items-center gap-2\">\n                  <div className=\"w-4 h-4 bg-[#C778DD]\"></div>\n                  <span className=\"text-[#ABB2BF] text-sm\">\n                    Currently studying at <span className=\"text-white\">JAMK University</span>\n                  </span>\n                </div>\n              </div>\n\n              {/* Dot grid */}\n              <div className=\"absolute top-1/2 right-0 dot-grid opacity-50\">\n                {[...Array(25)].map((_, i) => (\n                  <span key={i}></span>\n                ))}\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Quote Section */}\n      <section className=\"py-20\">\n        <div className=\"container mx-auto px-4 md:px-16\">\n          <div className=\"max-w-3xl mx-auto relative\">\n            <div className=\"border border-[#ABB2BF] p-8 relative\">\n              <span className=\"absolute -top-4 -left-2 text-5xl text-[#ABB2BF]\">"</span>\n              <p className=\"text-white text-xl mb-4\">\n                With great skills comes great responsibility in automation\n              </p>\n              <span className=\"absolute -bottom-8 -right-2 text-5xl text-[#ABB2BF]\">"</span>\n            </div>\n            <div className=\"mt-4 border border-[#ABB2BF] px-4 py-2 inline-block ml-auto\">\n              <span className=\"text-[#ABB2BF]\">- Engineer's Motto</span>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Projects Section */}\n      <section id=\"projects\" className=\"py-20\">\n        <div className=\"container mx-auto px-4 md:px-16\">\n          <div className=\"flex items-center justify-between mb-12\">\n            <h2 className=\"text-2xl font-medium\">\n              <span className=\"text-[#C778DD]\">#</span>projects\n              <span className=\"ml-4 text-[#C778DD]\">━━━━━━━━━━━━</span>\n            </h2>\n            <button className=\"text-white hover:text-[#C778DD] transition-colors\">\n              View all ~~&gt;\n            </button>\n          </div>\n\n          <div className=\"grid md:grid-cols-3 gap-6\">\n            {projects.map((project) => (\n              <div key={project.id} className=\"border border-[#ABB2BF] group hover:border-[#C778DD] transition-colors\">\n                <div className=\"h-48 bg-gradient-to-br from-[#1E1E1E] to-[#282C33] overflow-hidden\">\n                  <img \n                    src={project.image} \n                    alt={project.title}\n                    className=\"w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity\"\n                  />\n                </div>\n                <div className=\"border-t border-[#ABB2BF] p-4\">\n                  <div className=\"flex flex-wrap gap-2 mb-3\">\n                    {project.technologies.slice(0, 3).map((tech, idx) => (\n                      <span key={idx} className=\"text-[#ABB2BF] text-xs\">{tech}</span>\n                    ))}\n                  </div>\n                </div>\n                <div className=\"p-4 pt-0\">\n                  <h3 className=\"text-white font-medium mb-2\">{project.title}</h3>\n                  <p className=\"text-[#ABB2BF] text-sm mb-4\">{project.description}</p>\n                  <Button \n                    variant=\"outline\" \n                    size=\"sm\" \n                    className=\"border-[#C778DD] text-white hover:bg-[#C778DD]/10 w-full\"\n                  >\n                    View Details <ExternalLink className=\"w-3 h-3 ml-2\" />\n                  </Button>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </section>\n\n      {/* Skills Section */}\n      <section id=\"skills\" className=\"py-20 bg-[#1E1E1E]\">\n        <div className=\"container mx-auto px-4 md:px-16\">\n          <h2 className=\"text-2xl font-medium mb-12\">\n            <span className=\"text-[#C778DD]\">#</span>skills\n            <span className=\"ml-4 text-[#C778DD]\">━━━━━━━━━━━━</span>\n          </h2>\n\n          <div className=\"grid md:grid-cols-3 gap-6\">\n            <div className=\"border border-[#ABB2BF]\">\n              <div className=\"border-b border-[#ABB2BF] p-3\">\n                <h3 className=\"text-white font-medium\">Automation</h3>\n              </div>\n              <div className=\"p-4\">\n                <div className=\"flex flex-wrap gap-2\">\n                  {skills.automation.map((skill, idx) => (\n                    <span key={idx} className=\"text-[#ABB2BF] text-sm\">{skill}</span>\n                  ))}\n                </div>\n              </div>\n            </div>\n\n            <div className=\"border border-[#ABB2BF]\">\n              <div className=\"border-b border-[#ABB2BF] p-3\">\n                <h3 className=\"text-white font-medium\">AI & ML</h3>\n              </div>\n              <div className=\"p-4\">\n                <div className=\"flex flex-wrap gap-2\">\n                  {skills.aiMachineLearning.map((skill, idx) => (\n                    <span key={idx} className=\"text-[#ABB2BF] text-sm\">{skill}</span>\n                  ))}\n                </div>\n              </div>\n            </div>\n\n            <div className=\"border border-[#ABB2BF]\">\n              <div className=\"border-b border-[#ABB2BF] p-3\">\n                <h3 className=\"text-white font-medium\">Programming</h3>\n              </div>\n              <div className=\"p-4\">\n                <div className=\"flex flex-wrap gap-2\">\n                  {skills.programmingLanguages.map((skill, idx) => (\n                    <span key={idx} className=\"text-[#ABB2BF] text-sm\">{skill}</span>\n                  ))}\n                </div>\n              </div>\n            </div>\n\n            <div className=\"border border-[#ABB2BF]\">\n              <div className=\"border-b border-[#ABB2BF] p-3\">\n                <h3 className=\"text-white font-medium\">Design Tools</h3>\n              </div>\n              <div className=\"p-4\">\n                <div className=\"flex flex-wrap gap-2\">\n                  {skills.designTools.map((skill, idx) => (\n                    <span key={idx} className=\"text-[#ABB2BF] text-sm\">{skill}</span>\n                  ))}\n                </div>\n              </div>\n            </div>\n\n            <div className=\"border border-[#ABB2BF]\">\n              <div className=\"border-b border-[#ABB2BF] p-3\">\n                <h3 className=\"text-white font-medium\">Industry 4.0</h3>\n              </div>\n              <div className=\"p-4\">\n                <div className=\"flex flex-wrap gap-2\">\n                  {skills.industry40.map((skill, idx) => (\n                    <span key={idx} className=\"text-[#ABB2BF] text-sm\">{skill}</span>\n                  ))}\n                </div>\n              </div>\n            </div>\n\n            <div className=\"border border-[#ABB2BF]\">\n              <div className=\"border-b border-[#ABB2BF] p-3\">\n                <h3 className=\"text-white font-medium\">Testing</h3>\n              </div>\n              <div className=\"p-4\">\n                <div className=\"flex flex-wrap gap-2\">\n                  {skills.testing.map((skill, idx) => (\n                    <span key={idx} className=\"text-[#ABB2BF] text-sm\">{skill}</span>\n                  ))}\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* About Me Section */}\n      <section id=\"about-me\" className=\"py-20\">\n        <div className=\"container mx-auto px-4 md:px-16\">\n          <h2 className=\"text-2xl font-medium mb-12\">\n            <span className=\"text-[#C778DD]\">#</span>about-me\n            <span className=\"ml-4 text-[#C778DD]\">━━━━━━━━━━━━</span>\n          </h2>\n\n          <div className=\"grid md:grid-cols-2 gap-12\">\n            <div>\n              <p className=\"text-[#ABB2BF] mb-6\">{personalInfo.summary}</p>\n              \n              <div className=\"mt-8\">\n                <h3 className=\"text-white font-medium mb-4\">\n                  <span className=\"text-[#C778DD]\">#</span>experience\n                </h3>\n                <div className=\"space-y-6\">\n                  {experience.map((exp) => (\n                    <div key={exp.id} className=\"border border-[#ABB2BF] p-4\">\n                      <div className=\"flex items-start justify-between mb-2\">\n                        <div>\n                          <h4 className=\"text-white font-medium\">{exp.title}</h4>\n                          <p className=\"text-[#C778DD] text-sm\">{exp.company}</p>\n                        </div>\n                        <Badge className=\"bg-[#C778DD] text-white\">{exp.period.split(' ')[0]}</Badge>\n                      </div>\n                      <p className=\"text-[#ABB2BF] text-sm\">{exp.location}</p>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            </div>\n\n            <div>\n              <h3 className=\"text-white font-medium mb-4\">\n                <span className=\"text-[#C778DD]\">#</span>education\n              </h3>\n              {education.map((edu) => (\n                <div key={edu.id} className=\"border border-[#ABB2BF] p-4 mb-6\">\n                  <h4 className=\"text-white font-medium mb-2\">{edu.degree}</h4>\n                  <p className=\"text-[#C778DD] text-sm mb-2\">{edu.institution}</p>\n                  <p className=\"text-[#ABB2BF] text-sm mb-3\">{edu.period}</p>\n                  <p className=\"text-[#ABB2BF] text-sm\">{edu.description}</p>\n                </div>\n              ))}\n\n              <h3 className=\"text-white font-medium mb-4 mt-8\">\n                <span className=\"text-[#C778DD]\">#</span>certifications\n              </h3>\n              <div className=\"border border-[#ABB2BF] p-4\">\n                {certifications.map((cert) => (\n                  <div key={cert.id} className=\"flex items-center gap-2 mb-2\">\n                    <Award className=\"w-4 h-4 text-[#C778DD]\" />\n                    <span className=\"text-[#ABB2BF] text-sm\">{cert.name}</span>\n                  </div>\n                ))}\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Contact Section */}\n      <section id=\"contacts\" className=\"py-20 bg-[#1E1E1E]\">\n        <div className=\"container mx-auto px-4 md:px-16\">\n          <h2 className=\"text-2xl font-medium mb-12\">\n            <span className=\"text-[#C778DD]\">#</span>contacts\n            <span className=\"ml-4 text-[#C778DD]\">━━━━━━━━━━━━</span>\n          </h2>\n\n          <div className=\"grid md:grid-cols-2 gap-12\">\n            <div>\n              <p className=\"text-[#ABB2BF] mb-8\">\n                I'm interested in freelance opportunities and collaboration. However, if you have other request or question, don't hesitate to contact me.\n              </p>\n              <div className=\"border border-[#ABB2BF] p-4\">\n                <h3 className=\"text-white font-medium mb-4\">Message me here</h3>\n                <div className=\"space-y-2\">\n                  <a href={`mailto:${personalInfo.email}`} className=\"flex items-center gap-2 text-[#ABB2BF] hover:text-[#C778DD] transition-colors\">\n                    <Mail className=\"w-4 h-4\" />\n                    {personalInfo.email}\n                  </a>\n                  <a href={personalInfo.linkedin} target=\"_blank\" rel=\"noopener noreferrer\" className=\"flex items-center gap-2 text-[#ABB2BF] hover:text-[#C778DD] transition-colors\">\n                    <Linkedin className=\"w-4 h-4\" />\n                    LinkedIn Profile\n                  </a>\n                </div>\n              </div>\n            </div>\n\n            <form onSubmit={handleSubmit} className=\"space-y-4\">\n              <div>\n                <Input\n                  name=\"name\"\n                  placeholder=\"Name\"\n                  value={formData.name}\n                  onChange={handleInputChange}\n                  required\n                  className=\"bg-transparent border-[#ABB2BF] text-white placeholder:text-[#ABB2BF]\"\n                />\n              </div>\n              <div>\n                <Input\n                  name=\"email\"\n                  type=\"email\"\n                  placeholder=\"Email\"\n                  value={formData.email}\n                  onChange={handleInputChange}\n                  required\n                  className=\"bg-transparent border-[#ABB2BF] text-white placeholder:text-[#ABB2BF]\"\n                />\n              </div>\n              <div>\n                <Textarea\n                  name=\"message\"\n                  placeholder=\"Message\"\n                  value={formData.message}\n                  onChange={handleInputChange}\n                  required\n                  rows={5}\n                  className=\"bg-transparent border-[#ABB2BF] text-white placeholder:text-[#ABB2BF]\"\n                />\n              </div>\n              <Button \n                type=\"submit\" \n                className=\"border border-[#C778DD] bg-transparent hover:bg-[#C778DD]/10 text-white w-full\"\n                disabled={isSubmitting}\n              >\n                {isSubmitting ? 'Sending...' : (\n                  <>\n                    <Send className=\"w-4 h-4 mr-2\" />\n                    Send\n                  </>\n                )}\n              </Button>\n            </form>\n          </div>\n        </div>\n      </section>\n\n      {/* Footer */}\n      <footer className=\"border-t border-[#ABB2BF] py-8\">\n        <div className=\"container mx-auto px-4 md:px-16\">\n          <div className=\"flex flex-col md:flex-row items-center justify-between gap-4\">\n            <div className=\"flex items-center gap-2\">\n              <Square className=\"w-4 h-4 text-[#C778DD]\" />\n              <span className=\"text-white font-medium\">{personalInfo.name}</span>\n              <span className=\"text-[#ABB2BF]\">thepushpaco@outlook.com</span>\n            </div>\n            <p className=\"text-[#ABB2BF] text-sm\">© 2025. Made with passion</p>\n          </div>\n          <div className=\"flex items-center justify-center gap-4 mt-4\">\n            <a href={personalInfo.github} target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-[#ABB2BF] hover:text-[#C778DD] transition-colors\">\n              <Github className=\"w-5 h-5\" />\n            </a>\n            <a href={personalInfo.linkedin} target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-[#ABB2BF] hover:text-[#C778DD] transition-colors\">\n              <Linkedin className=\"w-5 h-5\" />\n            </a>\n          </div>\n        </div>\n      </footer>\n    </div>\n  );\n};\n\nexport default Home;\n